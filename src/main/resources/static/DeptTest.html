<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script type="text/javascript">
	$(function (){
				
		$("#btnInsert").click(function(){
			var dept = $("#f").serialize();
			$.ajax("/insertDept", {data:dept, success:function(r){
				listDept();
			}});
		});
		
			var arr;
			function listDept(){
				
				$("#tb").empty();
				$("#tb").html("<th>부서번호</th><th>부서명</th><th>부서위치</th>");
				
				$.getJSON("/listDept",function(data){
					arr = data;
					$.each(data, function(idx, d){
						
						var tr = $("<tr></tr>").attr("idx", idx);
						var idx = $(this).attr("idx");
						var dept = arr[idx];
						var i=0;
						$.each(dept, function(key, value){
							$(inputArr[i++]).val(value);
						});
			
					$.each(d, function(key, value){
						var td = $("<td></td>").html(value);
						$(tr).append(td);
					});
					$("#tb").append(tr);
					});
				});
			};
			
			$("#btn").click(function(){
				listDept();
			});
	});
</script>
</head>
<body>
	<h2>부서등록</h2>
	<hr>
	<form id="f">
	부서번호 : <input type="text" id="dno" name="dno"><br>
	부서이름 : <input type="text" id="dname" name="dname"><br>
	부서지역 : <input type="text" id="dloc" name="dloc"><br>
	</form>
	<button id="btnInsert">확인</button>
	<hr>
	<table id="tb" border="1" width="70%">
		<tr>
			<th>부서번호</th>
			<th>부서명</th>
			<th>부서위치</th>
		</tr>
	</table>
	<br>
	<button id="btn">부서목록 읽어오기</button>
</body>
</html>